# ğŸ“¦ todoapp Step 02 Gemfile & Bundler

ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª (Gem) ã‚’ **Gemfile** ã«å®£è¨€ã—ã€Bundler ã§ä¸€æ‹¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚ä¾å­˜ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã€ãƒãƒ¼ãƒ é–‹ç™ºã‚„ç’°å¢ƒå†ç¾ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šä¾¿åˆ©ã§ã™ã€‚

---

## ğŸ¯ ç›®çš„ã¨æˆæœç‰©

### ç›®çš„
- Gemfile ã§ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å®£è¨€ã™ã‚‹ã€‚
- Bundler ã§ Gem ã‚’ã¾ã¨ã‚ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

### æˆæœç‰©
- `Gemfile`
- `Gemfile.lock` (è‡ªå‹•ç”Ÿæˆ)
- `vendor/bundle/` é…ä¸‹ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸ Gem ç¾¤ (è‡ªå‹•ç”Ÿæˆ)
- `.bundle/config` (Bundler ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€è‡ªå‹•ç”Ÿæˆ)

> `vendor/bundle` ã‚’ `.gitignore` ã«è¿½åŠ ã—ã¦ãŠãã¨ã€å·¨å¤§ãª Gem ã‚’ãƒªãƒã‚¸ãƒˆãƒªã¸èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã›ãšã«æ¸ˆã¿ã¾ã™ã€‚
> .gitignoreã¯step10ã§ä½œæˆã—ã¾ã™ãŒã€ä»»æ„ã§ã“ã“ã§ä½œæˆã—ã¦ã‚‚ã‚ˆã„ã§ã™ã€‚

---

## ğŸš€ ä½œæ¥­ãƒ•ãƒ­ãƒ¼

### 1. Gemfile ã‚’ä½œæˆã—ã¦ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã
```bash
touch Gemfile
cursor Gemfile  # VS Code ã®å ´åˆã¯ code Gemfile
```

ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã€æ¬¡ã®ã€ŒGemfile ä¾‹ã€ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ã™ã‚‹ã€‚

#### Gemfile ä¾‹
```ruby
source "https://rubygems.org"

gem "puma"
gem "rake"
gem "rackup"
gem "sinatra"
gem "sinatra-activerecord"
gem "sqlite3"
```

---

### 2. ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
```bash
bundle install --path vendor/bundle
```

- `--path` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ Gem ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†… (`vendor/bundle`) ã«é–‰ã˜è¾¼ã‚ã‚‹ã€‚
- å‡¦ç†ãŒå®Œäº†ã—ãŸã‚‰ `vendor/bundle/` ã«å¤§é‡ã®ãƒ•ã‚©ãƒ«ãƒ€ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

---

## ğŸ’¡ ãƒã‚¤ãƒ³ãƒˆè§£èª¬
| é …ç›® | å†…å®¹ |
|----|----|
| Gemfile | ä¾å­˜ã‚’å®£è¨€ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚**å®£è¨€ã—ãŸã ã‘**ã§ã¯ Gem ã¯å…¥ã‚‰ãªã„ã€‚ |
| Gemfile.lock | å®Ÿéš›ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ Gem ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ›¸ãå‡ºã™ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã€‚ç’°å¢ƒå·®åˆ†ã‚’é˜²ãã€‚ |
| Bundler | Gemfile ã‚’èª­ã¿å–ã‚Šã€ä¾å­˜ã‚°ãƒ©ãƒ•ã‚’è§£æ±ºã—ã¦ `bundle install` ã‚’å®Ÿè¡Œã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚ |
| `vendor/bundle` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ã« Gem ã‚’ç½®ãæ…£ç¿’çš„ãƒ‘ã‚¹ã€‚è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡çªã‚’é¿ã‘ã‚‰ã‚Œã‚‹ã€‚ |
| `bundle exec` | Gemfile.lock ã«è¨˜éŒ²ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼ã€‚ |

### ä¾å­˜è§£æ±ºã‚¤ãƒ¡ãƒ¼ã‚¸
```mermaid
graph TD
  A[Gemfile<br/>ï¼ˆä¾å­˜å®£è¨€ï¼‰] -->|bundle install| B[Bundler]
  B --> C[Gem ã®å®Ÿä½“<br/>vendor/bundle]
  C --> D[Gemfile.lock<br/>ï¼ˆè§£æ±ºçµæœï¼‰]
```

### Gemfile ã®è¦‹ã‹ãŸ
| è¡Œ | æ„å‘³ | èª¬æ˜ |
|----|------|-----------|
| `source "https://rubygems.org"` | Gem ã‚’å–å¾—ã™ã‚‹å…¬å¼ãƒªãƒã‚¸ãƒˆãƒª | Private Gem ã‚µãƒ¼ãƒã‚’ä½¿ã†å ´åˆã¯ URL ã‚’å¤‰ãˆã‚‹ |
| `gem "sinatra"` | Sinatra æœ¬ä½“ | HTTP ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¡¨ç¤ºã‚’æ‹…å½“ã™ã‚‹ |
| `gem "sinatra-activerecord"` | Sinatra ã¨ ActiveRecord ã®æ©‹æ¸¡ã— | DB æ“ä½œã‚’ç°¡å˜ã«ã™ã‚‹ |
| `gem "sqlite3"` | SQLite ãƒ‰ãƒ©ã‚¤ãƒ | ãƒ•ã‚¡ã‚¤ãƒ«å‹ DB ã‚’ Ruby ã‹ã‚‰æ“ä½œã™ã‚‹ |

---

## ğŸ› ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†è§£ã—ã¦ã¿ã‚ˆã†

### Gemfile
(â€» ä¸Šè¨˜ã€ŒGemfile ã®è¦‹ã‹ãŸã€å‚ç…§)

### Gemfile.lock
- å®Ÿéš›ã«è§£æ±ºã—ãŸ **Gem ã®åå‰ + æ­£ç¢ºãªãƒãƒ¼ã‚¸ãƒ§ãƒ³** ã‚’è¨˜éŒ²ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚
- ãƒãƒ¼ãƒ å…¨å“¡ãŒåŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§é–‹ç™ºã§ãã‚‹ã‚ˆã†ãƒ­ãƒƒã‚¯ã™ã‚‹ã€‚
- æ‰‹å‹•ç·¨é›†ã¯åŸå‰‡ã—ãªã„ã€‚`bundle update` ã‚„ `bundle install` ãŒè‡ªå‹•ã§æ›¸ãæ›ãˆã‚‹ã€‚

### .bundle/config
- Bundler ã®ãƒ­ãƒ¼ã‚«ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã€‚
- `bundle config set --local path vendor/bundle` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã“ã“ã«ä¿å­˜ã•ã‚Œã‚‹ã€‚
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç½®ã‹ã‚Œã‚‹ãŸã‚ã€è¤‡æ•°ãƒªãƒã‚¸ãƒˆãƒªã§ç•°ãªã‚‹è¨­å®šã‚’å…±å­˜ã§ãã‚‹ã€‚

### vendor/bundle/
- Gem ã®å®Ÿä½“ã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã€‚
- Ruby ã‚„ OS åˆ¥ã®æ‹¡å¼µãŒã‚ã‚‹ Gem ã¯ `ruby/3.1.0/gems/...` ã®ã‚ˆã†ãªãƒã‚¹ãƒˆæ§‹é€ ã«ãªã‚‹ã€‚
- **å®¹é‡ãŒå¤§ãã„** ã—ã€GemfileãŒã‚ã‚Œã°å†ç¾ã§ãã‚‹ã®ã§ Git ã«ã¯å…¥ã‚Œãªã„ (.gitignore) ã€‚

---

## âœ… å‹•ä½œç¢ºèª
```bash
bundle exec ruby -e 'puts "Ruby å®Ÿè¡Œç’°å¢ƒ OK"'
```
`Ruby å®Ÿè¡Œç’°å¢ƒ OK` ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°ä¾å­˜è§£æ±ºã¯æˆåŠŸã—ã¦ã„ã‚‹ã€‚

---

## ğŸš© Commit Point
```bash
git add Gemfile Gemfile.lock
git commit -m "STEP02: add Gemfile & install dependencies"
```

> `vendor/bundle/` ã‚’è¿½åŠ ã—ãŸ`.gitignore` ã‚’ä½œæˆã—ãŸå ´åˆã¯ä¸€ç·’ã«ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã€‚

---

## ğŸ“ ç†è§£ãƒã‚§ãƒƒã‚¯
- [ ] Gemfile ã¨ Gemfile.lock ã®å½¹å‰²ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹ã€‚
- [ ] `bundle install` ã¨ `gem install` ã®é•ã„ã‚’èª¬æ˜ã§ãã‚‹ã€‚
- [ ] `bundle exec` ãŒå¿…è¦ãªç†ç”±ã‚’èª¬æ˜ã§ãã‚‹ã€‚

---

## ğŸ”— ã‚‚ã£ã¨è©³ã—ãçŸ¥ã‚ŠãŸã„ã¨ã
- Bundler å…¬å¼: https://bundler.io/
- Bundler ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ (5 åˆ†ã§ä½“é¨“): https://bundler.io/v2.4/#getting-started
- Sinatra å…¬å¼ã‚¤ãƒ³ãƒˆãƒ­: https://sinatrarb.com/intro.html
- Gemfile ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ (è¨˜äº‹): https://thoughtbot.com/blog/gemfile-best-practices
- SQLite ã‚’æ¡ç”¨ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ: https://www.sqlite.org/whentouse.html

---

ğŸ¤” AI ã«èã„ã¦ã¿ã‚ˆã† ğŸ¤–
```
Gemfile ã¨ Gemfile.lock ã®å½¹å‰²ã®é•ã„ã‚’åˆå¿ƒè€…å‘ã‘ã«èª¬æ˜ã—ã¦ãã ã•ã„ã€‚

bundle install --path vendor/bundle ã®pathã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å¿…é ˆã§ã—ã‚‡ã†ã‹ï¼Ÿ

bundle exec ruby -e 'puts "Ruby å®Ÿè¡Œç’°å¢ƒ OK"'ã€€ã¯ã©ã†ã„ã†æ„å‘³ã§ã™ã‹ï¼Ÿ

Gemfile.lock ãŒè¡çªã—ãŸã¨ãã¯ã©ã†è§£æ±ºã™ã‚‹ï¼Ÿ

`bundle update` ã¨ `bundle install` ã®é•ã„ã¯ï¼Ÿ

``` 